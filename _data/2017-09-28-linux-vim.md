---
layout: post
title: Vim命令详解
categories: Linux
description: Linux学习记录
keywords: Linux
---

# 
## vim 编辑器
文本编辑器，字处理器

nano，sed

vi：Visual interface
vim: vi improved

全屏编辑器，模式化编辑器
vim模式
编辑（命令模式）
输入模式
末行模式  :set nu    添加行号

## 模式转换
**编辑->输入**
- i:在当前光标所在字符前面转换为输入模式
- a:在当前光标所在字符后面转换为输入模式
- o:在当前光标所在行的下方，新建一行，并转换为输入模式
- I:在当前光标所在行的行首，转换为输入模式
- A:在当前光标所在行的行尾，转换为输入模式
- O:在当前光标所在行的上方，新建一行，并转换为输入模式  
**输入->编辑**
- Esc键返回

**编辑->末行**  
- :
**末行-->编辑**  
- Esc


## 一.打开文件
1.   vim +n 文件名  //打开文件，定位到第n行
2.   vim + 文件名   //打开文件，定位到最后一行
3.   vim +/pattern  //打开文件，定位到第一次被pattern模式匹配到的行的行首

##  二.关闭文件
**1、末行模式关闭文件**
-	:q  退出
-	:wq 保存退出
-	:!q 强制保存
-	:w  保存不退出
-	:w！强行保存
-	:wq --> :x
**2、编辑模式退出**
写文件时每次保存退出都要按下ESC建然后 :wq + Enter 才可以退出，
## 三、移动光标（编辑模式）
**1、逐字符移动**
-   j:下
-   k:上
-   h:左
-   l:右
-
-   #h  向左移动#个字符

**2、以单词为单位移动**
-   w  移动到下一个单词的词首
-   e  移动到下一个单词的词尾
-   b  移动到上一个单词的词首
-
-   #w  一次移动#个单词

**3、行内跳转**
-   0  绝对行首
-   ^  行首的第一个非空白字符
-   $  绝对行尾

**4、行间跳转**
-   #G  跳转至第#行
-   G   最后一行

-   末行模式下，直接给出行号即可，例如
-   :n		跳转至第n行

## 四、翻屏
-	Ctrl+f  向下翻一屏
-	Ctrl+b  向上翻一屏
-
-	Ctrl+d  向上翻半屏
-	Ctrl+u  向下翻半屏

## 五、删除单个字符
-	x   删除光标所在处的单个字符
-	#x  删除光标所在处及向后的#个字符

## 六、删除命令：d
-	d命令跟跳转命令组合使用
-	d$  删除光标至行尾的内容
-	d0  删除光标至行首的内容
-	[#]dw  向后删除#个单词		//#可有可无
-	[#]de  
-	[#]db  
-	[#]dd ;删除包括当前在内的向下#行
**末行模式下：**
-	:M,Nd   删除M到N行
-	.    表示当前行
-	$    表示最后一行
-	$-1  表示倒数第二行，以此类推
-	例如
-	:.,+5d   从当前行向下数5行删除
-	:.,Nd	 删除当前行到第N行
-	:.,$d	 删除当前行到做最后一行

## 七、粘贴命令 p
-	p  如果删除的或复制的为整行内容，则粘贴到光标所在的下方，非整行，则粘贴到光标所在字符的后面
-	P  如果删除的或复制的为整行内容，则粘贴到光标所在的上方，非整行，则粘贴到光标所在字符的前面

## 八、复制命令 y
-   用法同d命令

## 九、修改：先删除内容，再转换为新内容 c
-   c用法同d命令

## 十、替换 r
-	r   替换单个字符
-	#r  替换#个字符
-
-	R   开启替换模式

## 十一、撤销编辑操作 u
-	u   撤销前一次的操作  可连续撤销
-	#u  撤销前#次的操作
-
-	撤销最近一次的撤销操作   Ctrl+r

## 十二、重复前一次编辑操作 .
-	.

## 十三、可视化操作模式
-	v  按字符选取 选择光标经过的地方 //用法 按下小v键后移动光标选取
-	V  按行选取 选择光标经过的行	//用法 按下大V键后移动光标选取
-	[Ctrl]+v 块选择，按四方形选择内容   //用法 按下[Ctrl]+v键后移动光标选取
## 十四、查找
-	/pattern	自上而下查找pattern字符串
-	?pattern	自下而上查找pattern字符串
-   查找到之后
-	n 下一个	查看下一个查找到的字符串
-   N 上一个

## 十五、查找并替换
-	在末行模式下使用s命令
-	:m,ns/查找/替换/g
-	例如：
-	:5,10s/abcd/ABCD/[g]	查找5到10行所有的abcd字符串并替换为ABCD
-	如果你查找到的字符串中包含'/' 怎么办， 可以吧 '/' 替换成其他字符比如  s@h/jk@hasj@g    
-	后面加上g就是把每行所有匹配到的字符串替换
-	不加上g参数，默认把每行第一次匹配到的字符创替换

## 十六、打开多个文件
-	vim 文件1 文件2 ...
-	:next  切换下一个文件
-	:prev  切换上一个文件
-	:last  切换最后一个文件
-	:first 切换第一个文件
-	:files 查看所有编辑的文件
-	:n     编辑下一个
-	:N     编辑上一个
-	退出
-	:qa  退出全部正在编译的文件

## 十七、分屏显示一个文件（窗口拆分）
-	Ctrl+w,s  水平拆分窗口
-	Ctrl+w,v  垂直拆分窗口
-
-	在窗口之间切换光标：
-	Ctrl+w，方向键

## 十八、分窗口显示多个文件
-	vim -o 文件1 文件2 ...  水平分隔显示文件1 文件2 ...
-	vim -O 文件1 文件2 ...  垂直分隔显示文件1 文件2 ...

## 十九、将当前文件的部分内容另存为另外一个文件
-	:w  /文件路径
-	:m,nw /文件路径

## 二十、将另一个文件的内容填充到当前文件
-	:r /文件路径

## 二十一、跟shell交互
-	:! 命令

## 二十二、高级话题
**1.环境参数**
-	:set all 显示所有环境配置
-	:set     显示与系统默认不相同的环境参数
-	~/.viminfo   操作记录
-	~/.vimrc     自己设置的参数
-	/etc/vimrc   vim环境配置文件
-	1.显示或取消显示行号
-	:set nu	显示行号
-	:set nonu  取消行号

**2.显示忽略或区分大小写**
-	:set ignorecase
-	:set ic
-
-	:set noic

**3.设置自动缩进**
-	:set autoindent
-	:set ai
-	:set noai

**4.查找到的文本高亮显示**
-	:set hlsearch
-	:set nohlsearch

**5.语法高亮**
-	:syntax on
-	:nosyntax off

## 二十三、其他
vim编辑设置

在每个用户的家目录下都会有一个隐藏文件叫  .vimrc  没有自己创建    根据需要选择添加以下内容
```bash
root@promote ~]# vim .vimrc

set hlsearch             "高亮度反白
set backspace=2      "可随时用退格键删除
set autoindent           "自动缩排
set ruler                "显示最后一行状态
set showmode             "显示左下角一行的状态
set nu           "显示行号
set bg=dark      "显示不同的底色色调
syntax on        "进行语法检测，颜色显示

以下两项要一起添加
set tabstop=4        "设定tab键缩进的空格数
set shiftwidth=4     "设定将多少个空格视为一个缩进
```


